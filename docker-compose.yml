version: "3.2"
services:
  dev_substrate:
    image: ghcr.io/adoriasoft/substrate-node:latest
    command: --dev --abci_genesis_state_path=/genesis.json --abci_server_url=tcp://dev_cosmos:26658 --abci_rpc_url=0.0.0.0:26657
    volumes:
      - ./.maintain/genesis.json:/genesis.json
    ports:
      - "9944:9944"
      - "26657:26657"
    links:
      - dev_cosmos

  dev_cosmos:
    image: ghcr.io/adoriasoft/cosmos-node:latest
    command: nsd start --with-tendermint=false --transport=grpc
    restart: on-failure
    ports:
      - "26658:26658"
